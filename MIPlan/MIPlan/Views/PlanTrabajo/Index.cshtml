
@{
    ViewBag.Title = "Plan de Trabajo";
    Layout = "~/Views/Shared/_LayoutContenido.cshtml";
}

<h2></h2>

<br />
<br />
<br />
<br />


<div ng-controller="MIPlanController as ctrl" ng-init="ctrl.Inicio()">

    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Modal Actividades Add & Update-->
    <div class="modal fade" data-keyboard="false" data-backdrop="static" id="ModalActividades" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form name="modalForm" novalidate>
                    <div id="title" class="">
                        <h5 class="modal-title" id="exampleModalLabel"></h5>
                        <button type="button" class="close btn-danger" data-dismiss="modal" ng-click="ctrl.close(modalForm)" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblPrograma" class="">Programa</label>
                            </div>
                            <div class="row justify-content-center">
                                <select id="cmbPrograma" class="" name="cmbPrograma" ng-options="option.Id as option.Programa for option in ctrl.ObtenerProgramasView" ng-model="ctrl.ObtenerDatosActividadesView[0].Id_Programa" required>
                                    <option value="">--Seleccionar Programa--</option>
                                </select>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.cmbPrograma.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Id_Programa" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblClave" for="formGroupExampleInput" class="">Clave</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" id="inputClave" class="" name="Clave" ng-model="ctrl.ObtenerDatosActividadesView[0].Clave" placeholder="Clave" required>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Clave.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Clave" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblAccion" for="formGroupExampleInput" class="">Acción</label>
                            </div>
                            <div class="row justify-content-center">
                                <textarea id="inputAccion" class="" name="Accion" rows="5" ng-model="ctrl.ObtenerDatosActividadesView[0].Accion" placeholder="Accion" required> </textarea>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Accion.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Accion" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblInicio" class="">Inicio</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" class="" id="InicioUpdate" name="Inicio" ng-model="ctrl.ObtenerDatosActividadesView[0].Fecha_Inicio" placeholder="Inicio" required>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Inicio.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Fecha_Inicio" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblFin" class="">Fin</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" class="" id="FinUpdate" name="Fin" ng-model="ctrl.ObtenerDatosActividadesView[0].Fecha_Fin" placeholder="Fin" required>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Fin.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Fecha_Fin" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblImpacto" class="">Impacto</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" id="inputImpacto" class="" name="Impacto" ng-model="ctrl.ObtenerDatosActividadesView[0].Impacto" placeholder="Impacto" required>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Impacto.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosActividadesView[0].Impacto" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblPrioritaria" class="">Prioritaria</label>
                            </div>
                            <div class="row justify-content-center">
                                <select id="cmbPrioritaria" class="" name="Prioritaria" ng-model="ctrl.Prioritaria" required>
                                    <option value="S">Si</option>
                                    <option value="N">No</option>
                                </select>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Prioritaria.$touched">
                                    <span ng-show="!ctrl.Prioritaria" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblStatus" class="">Estatus</label>
                            </div>
                            <div class="row justify-content-center">
                                <select id="cmbStatus" class="" name="Estatus" ng-model="ctrl.EStatus" required>
                                    <option value="P">Proceso</option>
                                    <option value="T">Terminada</option>
                                    <option value="C">Cancelada</option>
                                </select>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Estatus.$touched">
                                    <span ng-show="!ctrl.EStatus" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>

                            <br />
                            <div class="row justify-content-center">
                                <div id="ErrorModal" class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none">
                                    <strong id="MessageModal">¡Ha ocurrido un error! </strong>
                                    <button type="button" class="close" ng-click="ctrl.DivErrorModal()" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn btn-danger" ng-click="ctrl.close(modalForm)">Salir</button>
                        <button type="button" id="btnModal" class="btn" ng-click="ctrl.ActividadesCrud(ctrl.ObtenerDatosActividadesView[0].Id); ctrl.reset(modalForm)" ng-disabled="modalForm.$invalid">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Modal Unidades Responsables Update-->
    <div class="modal fade" data-keyboard="false" data-backdrop="static" id="ModalUnidadesResp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form name="modalForm" novalidate>
                    <div id="titleUR" class="">
                        <h5 class="modal-title" id="exampleModalLabelUR"></h5>
                        <button type="button" class="close btn-danger" data-dismiss="modal" ng-click="ctrl.close(modalForm)" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblDependencia" class="">Dependencia:</label>
                            </div>
                            <div class="row justify-content-center">
                                <select id="cmbDependencia" class="" name="cmbDependencia" ng-options="option.Id as option.Descripcion for option in ctrl.dependencias" ng-model="ctrl.ObtenerDatosUnidadesRespView[0].Dependencia" required>
                                    <option value="">--Seleccionar Dependencia--</option>
                                </select>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.cmbDependencia.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosUnidadesRespView[0].Dependencia" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblClaveUR" class="">Clave</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" id="inputClaveUR" class="" name="ClaveUR" ng-maxlength="3" ng-model="ctrl.ObtenerDatosUnidadesRespView[0].Clave" placeholder="Clave" required>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.ClaveUR.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosUnidadesRespView[0].Clave" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages">
                                    <span ng-show="!modalForm.ClaveUR" class="text-danger">¡Maximo 3 digitos!</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblDescripcion" class="">Descripción</label>
                            </div>
                            <div class="row justify-content-center">
                                <input type="text" id="inputDescripcion" name="Descripcion" class="" ng-model="ctrl.ObtenerDatosUnidadesRespView[0].Descripcion" required placeholder="Descripción">
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.Descripcion.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosUnidadesRespView[0].Descripcion" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <div class="row justify-content-center">
                                <label id="lblStatusUR" class="">Estatus</label>
                            </div>
                            <div class="row justify-content-center">
                                <select id="cmbStatusUR" class="" name="cmbDependencia_status" ng-model="ctrl.EStatus" required>
                                    <option value="A">Activo</option>
                                    <option value="B">Baja</option>
                                </select>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.cmbDependencia_status.$touched">
                                    <span ng-show="!ctrl.EStatus" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <br />
                            <div class="row justify-content-center">
                                <label id="lblCoordinacion" class="">¿Es Coordinación?</label>
                            </div>
                            <div class="row justify-content-center">
                                <div id="Radio" class="radio-group form-control border border-success text-center" style="max-width: 280px;">
                                    <label class="radio ">
                                        <input type="radio" value="S" name="gender" ng-model="ctrl.ObtenerDatosUnidadesRespView[0].Coordinador" required />
                                        Si
                                        <span></span>
                                    </label>
                                    <label class="radio">
                                        <input type="radio" value="N" name="gender" ng-model="ctrl.ObtenerDatosUnidadesRespView[0].Coordinador" required />
                                        No
                                        <span></span>
                                    </label>
                                </div>
                            </div>
                            <div class="row justify-content-center">
                                <span class="messages" ng-show="modalForm.$submitted || modalForm.gender.$touched">
                                    <span ng-show="!ctrl.ObtenerDatosUnidadesRespView[0].Coordinador" class="text-danger">Campo Requerido</span>
                                </span>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                            <br />
                            <div class="row justify-content-center">
                                <div id="ErrorModal" class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none">
                                    <strong id="MessageModal">¡Ha ocurrido un error! </strong>
                                    <button type="button" class="close" ng-click="ctrl.DivErrorModal()" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                            </div>
                            <!------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn btn-danger" ng-click="ctrl.close(modalForm)">Salir</button>
                        <button type="button" id="btnModalUR" class="btn btn-primary" ng-click="ctrl.EditUR(); ctrl.resetUR(modalForm)" ng-disabled="modalForm.$invalid">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Modal Unidades Responsables Grid-->
    <div class="modal fade bd-example-modal-lg" data-keyboard="false" data-backdrop="static" id="ModalAddUR" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <form name="modalForm" novalidate>
                    <div id="titleUR" class="modal-header btn-success justify-content-center">
                        <h5 class="modal-title" id="exampleModalLabelUR">Agregar Unidad Responsable</h5>
                        <button type="button" class="close btn-danger" data-dismiss="modal" aria-label="Close" ng-click="ctrl.close(modalForm)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <table class="table table-hover">
                            <thead class="thead bgAct text-white">
                                <tr>
                                    <th scope="col">
                                        Dependencia
                                    </th>
                                    <th scope="col">
                                        Clave
                                    </th>
                                    <th scope="col">
                                        Descripción
                                    </th>
                                    <th scope="col">
                                        Estatus
                                    </th>
                                    <th scope="col">
                                        Coordinación
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-pagination="i in ctrl.ObtenerGridUnidadesModalView |  itemsPerPage: 5" pagination-id="PaginationModalUR" ng-click="ctrl.getId(i.Id)" class="cursor-pointer">
                                    <td>{{i.Dependencia}}</td>
                                    <td>{{i.Clave}}</td>
                                    <td>{{i.Descripcion}}</td>
                                    <td>{{i.Status}}</td>
                                    <td>{{i.Coordinador}}</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="5">
                                        <ng-pagination-control boundary-links="true" pagination-id="PaginationModalUR"></ng-pagination-control>
                                    </th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn btn-danger" ng-click="ctrl.close(modalForm)">Salir</button>
                        <button type="button" id="btnModalUR" class="btn btn-success" ng-click="ctrl.SaveUR(); ctrl.close(modalForm)">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-------http://localhost:53805/PlanTrabajo/GuardarUnidadesResp?Id_Actividades=1&Id_Unidad=7-->
    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Modal Areas de Atencion Gird-->
    <div class="modal fade bd-example-modal-lg" data-keyboard="false" data-backdrop="static" id="ModalAreasDeAtencion" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <form name="modalForm" novalidate>
                    <div id="titleUR" class="modal-header btn-success justify-content-center">
                        <h5 class="modal-title" id="exampleModalLabelUR">Agregar Area de Atención</h5>
                        <button type="button" class="close btn-danger" data-dismiss="modal" aria-label="Close" ng-click="ctrl.close(modalForm)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">                    
                        <table class="table table-hover">
                            <thead class="thead bgAct text-white">
                                <tr>
                                    <th scope="col">
                                        Id Plan
                                    </th>
                                    <th scope="col">
                                        Id Area De Atención
                                    </th>
                                    <th scope="col">
                                        Descripción
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-pagination="i in ctrl.ObtenerModalGridAreasAtencionView | filter: ModalF|  itemsPerPage: 15" pagination-id="PaginationModalAR" ng-click="" class="cursor-pointer">
                                    <td>{{i.Id_Plan}}</td>
                                    <td>{{i.Id_Area}}</td>
                                    <td>{{i.Descripcion}}</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="5">
                                        <ng-pagination-control boundary-links="true" pagination-id="PaginationModalAR"></ng-pagination-control>
                                    </th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn btn-danger" ng-click="ctrl.close(modalForm)">Salir</button>
                        <button type="button" id="btnModalUR" class="btn btn-success" ng-click="ctrl.SaveUR(); ctrl.close(modalForm)">Guardar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->

    <div class="container">


        <div id="Error" class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none">
            <strong id="Message">¡Ha ocurrido un error! </strong>
            <button type="button" class="close" ng-click="ctrl.DivError()" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>


        <div class="row justify-content-center">
            <div class="col-sm-12 col-md-6 col-lg-2 col-xl-2">
                <div class="form-group">
                    <label for="lblEjercicios" class="text-primary">Ejercicio:</label>
                    <select class="form-control border border-primary" name="cmbEjercicio" ng-change="ctrl.ValorEjercicio()" ng-options="option.Id as option.Descripcion for option in ctrl.Ejercicios" ng-model="ctrl.buscarEjercicios" style="max-width:100%;">
                        <option value="">Seleccionar Ejercicio</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-3 col-xl-3">
                <div class="form-group">
                    <label for="lblDependencia" class="text-primary">Dependencia:</label>
                    <select class="form-control border border-primary" name="cmbDependencia" ng-change="ctrl.ValorDependencia()" ng-options="option.Id as option.Descripcion for option in ctrl.dependencias" ng-model="ctrl.buscarDependencias" style="max-width:100%;">
                        <option value="">Seleccionar Dependencia</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-2 col-xl-2">
                <div class="form-group">
                    <label for="lblPlanes" class="text-primary">Plan de Trabajo:</label>
                    <select class="form-control border border-primary" name="cmbPlanDeTrabajo" ng-change="ctrl.ValorPlanes()" ng-options="option.Id as option.Descripcion for option in ctrl.Planes" ng-model="ctrl.buscarPlanes" style="max-width:100%;">
                        <option value="">Seleccionar Plan de Trabajo</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-3 col-xl-3">
                <div class="form-group">
                    <label for="lblUnidadesR" class="text-primary">Unidad Responsable</label>
                    <select class="form-control border border-primary" name="cmbUnidadResponsable" ng-change="ctrl.ValorUnidad()" ng-options="option.Id as option.Descripcion for option in ctrl.UnidadesResponsables" ng-model="ctrl.buscar" style="max-width:100%;">
                        <option value="">Seleccionar Unidad Responsable</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-2 col-xl-2">
                <div class="form-group">
                    <label for="lblBuscar" class="text-primary">&nbsp;</label>
                    <button class="btn btn-info btn-block" ng-click="ctrl.BtnBuscar()">Buscar</button>
                </div>
            </div>
        </div>

    </div>
    <br />
    <div class="container-fluid border-bottom border-info"></div>
    <br />

    <!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="row">
        <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4">
            <div class="panel panel-default panel-table">
                <div class="panel-heading">
                    <div class="container">
                        <div class="row">
                            <div class="col text-right">
                                <button id="btnCrear" class="btn btn-sm btn-success btn-create" style="width:120px" ng-click="ctrl.ModalAreasDeAtencion()" data-toggle="modal" data-target="#ModalAreasDeAtencion" data-backdrop="static" data-keyboard="false" data-toggle="tooltip" data-html="true" title="Agregar"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Nuevo</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-responsive" style="box-shadow: 10px 40px 96px rgba(0,0,0,.1)">
                    <table class="table table-hover ">
                        <thead>
                            <tr>
                                <th scope="col">Áreas de Atención</th>
                                <th scope="col">%</th>
                                <th scope="col" style="text-align:center"><em class="fa fa-cog"></em></th>
                            </tr>
                        </thead>


                        <tbody ng-pagination="i in ctrl.GridAreasAtencionView |  itemsPerPage: 10 " pagination-id="PaginationGridAR">
                            <tr ng-class="{'Mybg text-white': A == ctrl.Descripcion}">
                                <td ng-click="ctrl.Meta(i.Id, i.Descripcion); A= ctrl.Descripcion" class="cursor-pointer"> {{i.Id}}.- {{i.Descripcion}} </td>
                                <td>0</td>

                                <td style="text-align:center">
                                    <button type="button" class="btn btn-danger" data-toggle="tooltip" data-html="true" title="Eliminar" ng-click="ctrl.EliminnarPeriodo(i.Id)" style="width:40px"><i class="fa fa-eraser" aria-hidden="true"></i></button>
                                </td>
                            </tr>
                        </tbody>
                        <!---->
                        <tfoot>
                            <tr>
                                <th>

                                </th>
                                <th>
                                    <button type="button" class="btn btn-success" data-toggle="tooltip" data-placement="top" title="Generar Reporte en Excel" ng-click="ctrl.BorrarImpViatico($index)" style="width:40px">
                                        <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                    </button>
                                </th>
                                <th>
                                    <button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top" title="Generar Reporte en PDF" ng-click="ctrl.BorrarImpViatico($index)" style="width:40px">
                                        <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                                    </button>
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <ng-pagination-control boundary-links="true" pagination-id="PaginationGridAR"></ng-pagination-control>
            </div>
            <br />
            <br />
            <br />
        </div>     
        <div class="col-sm-12 col-md-8 col-lg-8 col-xl-8">

            <div role="tabpanel" style="box-shadow: 10px 40px 96px rgba(0,0,0,.1)">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="Acciones-tab" data-toggle="tab" href="#Acciones" role="tab" aria-controls="Acciones" aria-selected="true">Actividades</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="UR-tab" data-toggle="tab" href="#UR" role="tab" aria-controls="UR" aria-selected="false">Unidades Responsables</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="Indicadores-tab" data-toggle="tab" href="#Indicadores" role="tab" aria-controls="Indicadores" aria-selected="false">Indicadores</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="Evidencias-tab" data-toggle="tab" href="#Evidencias" role="tab" aria-controls="Evidencias" aria-selected="false">Evidencias</a>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">

                    <div class="tab-pane fade show active" id="Acciones" role="tabpanel" aria-labelledby="Acciones-tab">
                        <br />
                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="container">
                                    <div class="row">
                                        <div class="col text-left">
                                            <h6>Ubicación:  <span class="badge badge-secondary">{{ctrl.Descripcion}}</span></h6>
                                        </div>
                                        <div class="col text-right">
                                            <button type="button" id="btnCrear" class="btn btn-sm btn-success btn-create" style="width:120px" data-toggle="modal" data-target="#ModalActividades" data-backdrop="static" data-keyboard="false" data-toggle="tooltip" data-html="true" title="Crear" ng-click="ctrl.ColorATCV()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Nuevo</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-responsive">

                                <table class="table table-hover" id="tableMain">
                                    <thead>
                                        <tr>
                                            <th scope="col">Programa</th>
                                            <th scope="col">Acción</th>
                                            <th scope="col">Inicio</th>
                                            <th scope="col">Fin</th>
                                            <th scope="col">Impacto</th>
                                            <th scope="col">Prioritaria</th>
                                            <th scope="col">Status</th>
                                            <th scope="col" style="text-align:center" colspan="3"><em class="fa fa-cog"></em></th>
                                        </tr>
                                    </thead>


                                    <tbody>

                                        <tr class="breakrow bgAct text-white cursor-pointer" ng-pagination="pro in ctrl.GridProgramas | itemsPerPage: 10 " pagination-id="PaginationGridActividades"> <td colspan="10">{{pro.Desc_Programa}}</td></tr>

                                        <tr class="datarow cursor-pointer" style="display:none" ng-repeat="i in ctrl.GridActividadesView " ng-click="ctrl.getUR(i.Id, i.Desc_Accion); A= ctrl.DescActividad" ng-class="{'MybgUR text-white': A == ctrl.DescActividad}">
                                            <td></td>
                                            <td>{{i.Desc_Accion}}</td>
                                            <td>{{i.Fecha_Inicio}}</td>
                                            <td>{{i.Fecha_Fin}}</td>
                                            <td>{{i.Impacto}}</td>
                                            <td>{{i.Prioritaria}}</td>
                                            <td>{{i.Status}}</td>
                                            <td colspan="3">
                                                <button type="button" id="btnUpdate" class="btn btn-primary" style="width:40px" data-toggle="modal" data-target="#ModalActividades" data-backdrop="static" data-keyboard="false" data-toggle="tooltip" data-html="true" title="Editar" ng-click="ctrl.ModalACTV(i.Id)">
                                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                                </button>

                                                <button type="button" class="btn btn-danger" data-toggle="tooltip" data-html="true" title="Eliminar" ng-click="ctrl.EliminnarA(i.Id)" style="width:40px"><i class="fa fa-eraser" aria-hidden="true"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>

                                    <tfoot>
                                        <tr>
                                            <th colspan="10"><dir-pagination-controls boundary-links="true" pagination-id="PaginationGridActividades"></dir-pagination-controls></th>

                                        </tr>
                                    </tfoot>
                                </table>
                                <div class="mb-5" style="text-align:center">{{ctrl.NoActv}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="UR" role="tabpanel" aria-labelledby="UR-tab">

                        <br />
                        <div class="panel panel-default panel-table">
                            <div class="panel-heading">
                                <div class="container">
                                    <div class="row">
                                        <div class="col text-left">
                                            <h6>Ubicación:  <span class="badge badge-secondary">{{ctrl.Descripcion}}  /  {{ctrl.DescActividad}}</span></h6>
                                        </div>
                                        <div class="col text-right">
                                            <button type="button" class="btn btn-sm btn-success btn-create" style="width:120px" data-toggle="modal" data-target="#ModalAddUR" data-backdrop="static" data-keyboard="false" data-toggle="tooltip" data-html="true" title="Agregar" ng-click="ctrl.GridUR()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Agregar Unidad</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table-responsive">

                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">Dependencia</th>
                                            <th scope="col">Clave</th>
                                            <th scope="col">Descripción</th>
                                            <th scope="col">Status</th>
                                            <th scope="col">Coordinador</th>
                                            <th scope="col" style="text-align:center" colspan="3"><em class="fa fa-cog"></em></th>
                                        </tr>
                                    </thead>


                                    <tbody ng-pagination="i in ctrl.GridUnidadesRespView |  itemsPerPage: 5" pagination-id="PaginationGridUR">

                                        <tr class="cursor-pointer">

                                            <td>{{i.Dependencia}}</td>
                                            <td>{{i.Clave}}</td>
                                            <td>{{i.Descripcion}}</td>
                                            <td>{{i.Status}}</td>
                                            <td>{{i.Coordinador}}</td>
                                            <td colspan="3">
                                                <button type="button" id="btnUpdate" class="btn btn-primary" style="width:40px" data-toggle="modal" data-target="#ModalUnidadesResp" data-backdrop="static" data-keyboard="false" data-toggle="tooltip" data-html="true" title="Editar" ng-click="ctrl.ModalUR(i.Id)">
                                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                                </button>

                                                <button type="button" class="btn btn-danger" data-toggle="tooltip" data-html="true" title="Eliminar" ng-click="ctrl.EliminarUR(i.IdR)" style="width:40px">
                                                    <i class="fa fa-eraser" aria-hidden="true"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>

                                    <tfoot>
                                        <tr>
                                            <th colspan="10"><dir-pagination-controls boundary-links="true" pagination-id="PaginationGridUR"></dir-pagination-controls></th>

                                        </tr>
                                    </tfoot>
                                </table>
                                <div class="mb-5" style="text-align:center">{{ctrl.NoUR}}</div>
                            </div>
                        </div>





                    </div>
                    <div class="tab-pane fade" id="Indicadores" role="tabpanel" aria-labelledby="Indicadores-tab"><h3>Indicadores</h3></div>
                    <div class="tab-pane fade" id="Evidencias" role="tabpanel" aria-labelledby="Evidencias-tab"><h3>Evidencias</h3></div>
                </div>
            </div>
        </div>
        <br />
        <br />
    </div>

</div>


<br />
<br />
<br />
<br />
<br />


<script src="~/Scripts/angular.min.js"></script>
<script src="~/Scripts/angular.js"></script>
<script src="~/Scripts/angular-pagination.js"></script>
<script src="~/Scripts/global.js"></script>
@*<script src="~/Scripts/angular.ng-modules.js"></script>*@
<script src="~/Scripts/Controllers/PlanTrabajoController.js"></script>
<script src="~/Scripts/Models/PlanTrabajoModel.js"></script>
<script src="~/Scripts/Controllers/AccesoController.js"></script>
<script src="~/Scripts/Models/AccesoModel.js"></script>
<!--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<script type="text/javascript">

    $('#InicioUpdate').datetimepicker({
        timepicker: false,
        format: 'd/m/Y'
    });
    $('#FinUpdate').datetimepicker({
        timepicker: false,
        format: 'd/m/Y'
    });


    $(document).ready(function () {

        //collapse and expand sections

        //$('.breakrow').click(function(){
        $('#tableMain').on('click', 'tr.breakrow', function () {
            $(this).nextUntil('tr.breakrow').slideToggle(200);
        });
    });

</script>

